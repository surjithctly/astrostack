FROM node:20-alpine

WORKDIR /app

# TODO: adjust for your Astro setup
COPY . .
RUN corepack enable && pnpm install
RUN pnpm build

# Common Astro SSR entrypoint; update if needed
EXPOSE 4321
CMD ["pnpm", "preview", "--host", "0.0.0.0", "--port", "4321"]
